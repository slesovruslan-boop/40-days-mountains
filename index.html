<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>40 дней в горы</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 20px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .header p {
            font-size: 14px;
            color: #888;
            line-height: 1.4;
        }

        .welcome {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .welcome p {
            font-size: 15px;
            color: #b0b0b0;
            margin-bottom: 15px;
        }

        .day-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .day-number {
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .day-title {
            font-size: 24px;
            font-weight: 600;
            color: #fff;
        }

        .stage-indicator {
            font-size: 12px;
            color: #888;
            padding: 4px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 8px;
        }

        .section-content {
            font-size: 16px;
            color: #e0e0e0;
            line-height: 1.7;
        }

        .observation {
            font-style: italic;
            color: #999;
        }

        .question {
            color: #fff;
            font-weight: 500;
        }

        .button {
            width: 100%;
            padding: 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 10px;
        }

        .button:active {
            transform: scale(0.98);
            background: rgba(255, 255, 255, 0.12);
        }

        .button.primary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #555, #888);
            transition: width 0.3s ease;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-screen {
            text-align: center;
        }

        .start-button {
            background: rgba(255, 255, 255, 0.12);
            border: 2px solid rgba(255, 255, 255, 0.3);
            margin-top: 30px;
            font-size: 17px;
            padding: 18px;
        }

        .hidden {
            display: none;
        }

        .completed-check {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid #4CAF50;
            position: relative;
        }

        .completed-check::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #4CAF50;
            font-size: 12px;
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #555;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>40 ДНЕЙ В ГОРЫ</h1>
            <p>Путь через дисциплину, тишину и тело</p>
        </div>

        <!-- Стартовый экран -->
        <div id="startScreen" class="start-screen">
            <div class="welcome">
                <p>Сорок дней. Без обещаний и без уловок.</p>
                <p>Ты идёшь в горы, даже если физически остаёшься в городе.</p>
                <p>Это не про результат — это про то, как ты держишь слово самому себе.</p>
                <p>Каждый день одно задание. Одна мысль. Один вопрос на ночь.</p>
                <p>Никто не будет тебя подталкивать. Здесь либо идёшь сам, либо не идёшь вообще.</p>
                <p>Это путь через тишину, тело и дисциплину к тому, кем ты способен быть.</p>
            </div>
            <button class="button start-button" onclick="startJourney()">Начать путь</button>
        </div>

        <!-- Экран прогресса -->
        <div id="progressScreen" class="hidden">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="currentDay">0</div>
                    <div class="stat-label">День</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="completedDays">0</div>
                    <div class="stat-label">Пройдено</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="remainingDays">40</div>
                    <div class="stat-label">Осталось</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>

            <!-- Карточка дня -->
            <div id="dayCard" class="day-card">
                <div class="day-header">
                    <div>
                        <div class="day-number" id="dayNumber">ДЕНЬ 1</div>
                        <div class="day-title" id="dayTitle">Порог</div>
                    </div>
                    <div class="stage-indicator" id="stageIndicator">Этап 1: Отрыв</div>
                </div>

                <div class="section">
                    <div class="section-label">Задание</div>
                    <div class="section-content" id="taskContent"></div>
                </div>

                <div class="section">
                    <div class="section-label">Наблюдение</div>
                    <div class="section-content observation" id="observationContent"></div>
                </div>

                <div class="section">
                    <div class="section-label">Вопрос на вечер</div>
                    <div class="section-content question" id="questionContent"></div>
                </div>

                <button class="button primary" onclick="completeDay()">Отметить выполнение</button>
            </div>

            <button class="button" onclick="showAllDays()">Посмотреть все дни</button>
        </div>

        <div class="footer">
            40 дней в горы · 2025
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        const content = {
  "project": {
    "name": "40 дней в горы",
    "description": "Сорок дней. Без обещаний и без уловок. Ты идёшь в горы, даже если физически остаёшься в городе. Это не про результат — это про то, как ты держишь слово самому себе. Каждый день одно задание. Одна мысль. Один вопрос на ночь. Никто не будет тебя подталкивать. Здесь либо идёшь сам, либо не идёшь вообще. Это путь через тишину, тело и дисциплину к тому, кем ты способен быть."
  },
  "stages": [
    {
      "stage": 1,
      "name": "Отрыв",
      "days": [
        {
          "day": 1,
          "title": "Порог",
          "task": "Сегодня вечером выключи телефон за час до сна. Просто выключи.",
          "observation": "Первый шаг всегда странный. Тело ещё не понимает, что началось.",
          "question": "Что я почувствовал, когда экран погас?"
        },
        {
          "day": 2,
          "title": "Тишина",
          "task": "Проведи 15 минут в полной тишине. Без музыки, подкастов, экранов. Сиди или иди — без звука извне.",
          "observation": "Тишина показывает, что внутри. Не всегда приятно.",
          "question": "Что всплыло в голове, когда стало тихо?"
        },
        {
          "day": 3,
          "title": "Вода",
          "task": "Выпей стакан воды сразу после пробуждения. До кофе, до телефона, до всего.",
          "observation": "Тело просыпается не от кофеина. Оно просыпается от внимания к нему.",
          "question": "Как я проснулся сегодня — рывком или постепенно?"
        },
        {
          "day": 4,
          "title": "Ранний час",
          "task": "Встань на 30 минут раньше обычного. Не для продуктивности — просто чтобы побыть до начала дня.",
          "observation": "Утро до будильника — это твоё время. Остальное — уже не совсем.",
          "question": "Что я сделал с этими тридцатью минутами?"
        },
        {
          "day": 5,
          "title": "Холод",
          "task": "Закончи утренний душ 30 секундами холодной воды. Просто стой под ней.",
          "observation": "Холод не спрашивает. Ты либо входишь, либо нет.",
          "question": "Что я думал перед тем, как повернуть кран?"
        },
        {
          "day": 6,
          "title": "Молчание",
          "task": "Сегодня не начинай разговор первым. Ни с кем. Слушай больше, чем говоришь.",
          "observation": "Молчание — не слабость. Это выбор не тратить слова просто так.",
          "question": "Сколько раз я хотел что-то сказать, но не сказал?"
        },
        {
          "day": 7,
          "title": "Еда",
          "task": "Съешь один приём пищи без телефона, без экрана, без параллельных дел. Просто ешь.",
          "observation": "Еда — не развлечение и не фон. Это топливо. Или ритуал.",
          "question": "Я почувствовал вкус или просто проглотил?"
        },
        {
          "day": 8,
          "title": "Сон",
          "task": "Ляг спать на 30 минут раньше, чем вчера. Без переговоров с собой.",
          "observation": "Сон — это не слабость. Это восстановление перед следующим подъёмом.",
          "question": "Что мешает мне лечь вовремя?"
        },
        {
          "day": 9,
          "title": "Дыхание",
          "task": "Утром, до того как взять телефон, сделай 10 глубоких вдохов и выдохов. Считай про себя.",
          "observation": "Дыхание — единственное, что всегда с тобой. Даже когда всё остальное рушится.",
          "question": "Сколько раз сегодня я дышал осознанно?"
        },
        {
          "day": 10,
          "title": "Отрыв",
          "task": "Сегодня не заходи ни в одну соцсеть. Вообще. Весь день.",
          "observation": "Ты оторвался от шума. Теперь ты слышишь себя чётче.",
          "question": "Что изменилось за эти десять дней?"
        }
      ]
    },
    {
      "stage": 2,
      "name": "Дисциплина",
      "days": [
        {
          "day": 11,
          "title": "Ритм",
          "task": "Определи одно действие, которое будешь делать каждый день в одно и то же время. Начни сегодня.",
          "observation": "Дисциплина — это не сила воли. Это ритм, который держит тебя.",
          "question": "Что я выбрал и почему именно это?"
        },
        {
          "day": 12,
          "title": "Движение",
          "task": "20 отжиманий. Неважно как — с колен, от стены, классикой. Просто сделай.",
          "observation": "Тело не врёт. Оно показывает, где ты сейчас.",
          "question": "Как тело отозвалось на нагрузку?"
        },
        {
          "day": 13,
          "title": "Повторение",
          "task": "Повтори вчерашнее задание — 20 отжиманий. В то же время.",
          "observation": "Второй раз всегда труднее. Новизна прошла, остался только выбор.",
          "question": "Я сделал это по привычке или усилием?"
        },
        {
          "day": 14,
          "title": "Ноги",
          "task": "30 приседаний. Спина прямая, пятки на полу. Без спешки.",
          "observation": "Ноги держат всё. Если они слабы — слабо всё.",
          "question": "Где я почувствовал усталость первой?"
        },
        {
          "day": 15,
          "title": "Связка",
          "task": "20 отжиманий + 30 приседаний. Одно за другим. Без перерыва больше минуты.",
          "observation": "Связки создают систему. Система создаёт форму.",
          "question": "Что было труднее — начать или продолжить?"
        },
        {
          "day": 16,
          "title": "Планка",
          "task": "Стой в планке 60 секунд. Локти под плечами, тело прямое.",
          "observation": "Планка не про силу. Про умение оставаться, когда хочется уйти.",
          "question": "В какой момент я захотел остановиться?"
        },
        {
          "day": 17,
          "title": "Утренний круг",
          "task": "Утром: 20 отжиманий, 30 приседаний, 60 секунд планка. Всё подряд.",
          "observation": "Утро задаёт день. Если утро твоё — день тоже.",
          "question": "Как изменился день после утренней нагрузки?"
        },
        {
          "day": 18,
          "title": "Чистота",
          "task": "Убери одно место, которое давно раздражает. До конца. Сегодня.",
          "observation": "Внешний порядок влияет на внутренний. Хаос притягивает хаос.",
          "question": "Что я почувствовал, когда закончил?"
        },
        {
          "day": 19,
          "title": "Постоянство",
          "task": "Повтори утренний круг. Та же связка. То же время.",
          "observation": "Постоянство скучно. Но именно оно строит основу.",
          "question": "Это стало легче или я просто привык к трудности?"
        },
        {
          "day": 20,
          "title": "Форма",
          "task": "Сегодня только наблюдай. Как ты ходишь, сидишь, стоишь. Не исправляй — просто смотри.",
          "observation": "Форма — это то, как ты присутствуешь в мире.",
          "question": "Что я заметил в своей позе и движениях?"
        }
      ]
    },
    {
      "stage": 3,
      "name": "Нагрузка",
      "days": [
        {
          "day": 21,
          "title": "Граница",
          "task": "Удвой утренний круг: 40 отжиманий, 60 приседаний, 90 секунд планка.",
          "observation": "Граница там, где ты думаешь, что не можешь. Но можешь.",
          "question": "В какой момент я захотел остановиться и не остановился?"
        },
        {
          "day": 22,
          "title": "Усталость",
          "task": "Повтори вчерашнюю нагрузку. Даже если тело болит.",
          "observation": "Усталость — не враг. Это сигнал, что ты растёшь.",
          "question": "Как усталость изменила моё отношение к заданию?"
        },
        {
          "day": 23,
          "title": "Бег",
          "task": "Беги 15 минут. Не быстро. Просто не останавливайся.",
          "observation": "Бег — это разговор с собой без слов.",
          "question": "О чём я думал, когда бежал?"
        },
        {
          "day": 24,
          "title": "Голод",
          "task": "Пропусти один приём пищи. Не перекусывай. Просто почувствуй голод.",
          "observation": "Голод показывает разницу между нуждой и привычкой.",
          "question": "Это был настоящий голод или просто желание?"
        },
        {
          "day": 25,
          "title": "Подъём",
          "task": "Найди лестницу или горку. Поднимайся 10 минут без остановки.",
          "observation": "Подъём всегда труднее спуска. Но только он ведёт наверх.",
          "question": "Когда я почувствовал, что хочу остановиться?"
        },
        {
          "day": 26,
          "title": "Полная нагрузка",
          "task": "Утром: двойной круг. Днём: 15 минут бега. Вечером: планка до отказа.",
          "observation": "Нагрузка ломает старую форму. Чтобы появилась новая.",
          "question": "Где я нашёл силы на третье задание?"
        },
        {
          "day": 27,
          "title": "Сопротивление",
          "task": "Повтори вчерашний день. Полностью.",
          "observation": "Сопротивление — это голос старого себя. Он не хочет уходить.",
          "question": "В чём моё тело сопротивлялось сильнее всего?"
        },
        {
          "day": 28,
          "title": "Тяжесть",
          "task": "Возьми что-то тяжёлое. Держи на вытянутых руках 3 минуты. Можно с паузами.",
          "observation": "Тяжесть учит, что всё проходит. Даже то, что кажется невыносимым.",
          "question": "Что я почувствовал, когда опустил руки?"
        },
        {
          "day": 29,
          "title": "Предел",
          "task": "Беги, пока не почувствуешь, что больше не можешь. Потом ещё 2 минуты.",
          "observation": "Предел — это договор с собой. Его можно пересмотреть.",
          "question": "Где на самом деле был мой предел?"
        },
        {
          "day": 30,
          "title": "Пауза",
          "task": "Сегодня отдыхай. Совсем. Никаких нагрузок. Просто наблюдай своё тело.",
          "observation": "Отдых — часть пути. Без него нет роста.",
          "question": "Что изменилось в моём теле за 10 дней?"
        }
      ]
    },
    {
      "stage": 4,
      "name": "Возвращение",
      "days": [
        {
          "day": 31,
          "title": "Сборка",
          "task": "Вернись к базовому кругу: 20 отжиманий, 30 приседаний, 60 секунд планка. Почувствуй разницу.",
          "observation": "Ты вернулся к началу. Но ты уже не тот.",
          "question": "Что стало легче?"
        },
        {
          "day": 32,
          "title": "Выбор",
          "task": "Составь список из трёх вещей, которые ты хочешь изменить после этих сорока дней.",
          "observation": "Выбор без действия — это просто мысль.",
          "question": "Какая из этих трёх вещей самая важная?"
        },
        {
          "day": 33,
          "title": "Слово",
          "task": "Дай себе слово на одно действие, которое начнёшь на 41-й день. Скажи вслух.",
          "observation": "Слово самому себе — самое важное слово.",
          "question": "Почему именно это действие?"
        },
        {
          "day": 34,
          "title": "Благодарность",
          "task": "Напиши три вещи, за которые благодарен своему телу.",
          "observation": "Тело прошло этот путь с тобой. Оно заслуживает уважения.",
          "question": "Когда я последний раз благодарил своё тело?"
        },
        {
          "day": 35,
          "title": "Ясность",
          "task": "Сядь в тишине на 20 минут. Без задач. Просто сиди.",
          "observation": "Ясность приходит не от мыслей. От пространства между ними.",
          "question": "Что стало яснее за эти минуты?"
        },
        {
          "day": 36,
          "title": "Завершение",
          "task": "Верни одну привычку, от которой отказался в начале пути. Посмотри, нужна ли она.",
          "observation": "Не всё, что ты оставил, нужно возвращать.",
          "question": "Хочу ли я это вернуть или просто проверяю?"
        },
        {
          "day": 37,
          "title": "Испытание",
          "task": "Выбери самое трудное задание из всего пути. Повтори его.",
          "observation": "Трудное остаётся трудным. Но ты уже знаешь, что можешь.",
          "question": "Что изменилось во мне с того первого раза?"
        },
        {
          "day": 38,
          "title": "Опора",
          "task": "Вспомни момент, когда почти сдался. Запиши его. И что помогло продолжить.",
          "observation": "Опора — это не всегда люди. Иногда это просто решение не отступать.",
          "question": "На что я опирался в трудные дни?"
        },
        {
          "day": 39,
          "title": "Последний подъём",
          "task": "Пройди весь путь с первого дня. Мысленно. Вспомни каждый этап.",
          "observation": "Ты поднялся выше, чем думал. Теперь ты знаешь дорогу.",
          "question": "Кем я был в первый день и кто я сейчас?"
        },
        {
          "day": 40,
          "title": "Спуск",
          "task": "Сегодня ничего не делай. Просто будь. Путь завершён.",
          "observation": "Спуск с горы — это не конец. Это возвращение с тем, что ты нашёл наверху.",
          "question": "Что я несу с собой?"
        }
      ]
    }
  ]
};

        // Получаем все дни в плоский массив
        const allDays = content.stages.flatMap(stage => 
            stage.days.map(day => ({
                ...day,
                stageName: stage.name,
                stageNumber: stage.stage
            }))
        );

        // Состояние пользователя
        let userData = {
            currentDay: 0,
            completedDays: [],
            startDate: null
        };

        // Загрузка данных из localStorage
        function loadUserData() {
            const saved = localStorage.getItem('40days_progress');
            if (saved) {
                userData = JSON.parse(saved);
                return true;
            }
            return false;
        }

        // Сохранение данных
        function saveUserData() {
            localStorage.setItem('40days_progress', JSON.stringify(userData));
        }

        // Начало пути
        function startJourney() {
            userData.startDate = new Date().toISOString();
            userData.currentDay = 1;
            saveUserData();
            showProgressScreen();
        }

        // Показать экран прогресса
        function showProgressScreen() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('progressScreen').classList.remove('hidden');
            updateUI();
        }

        // Обновление интерфейса
        function updateUI() {
            const currentDayData = allDays[userData.currentDay - 1];
            
            // Обновление статистики
            document.getElementById('currentDay').textContent = userData.currentDay;
            document.getElementById('completedDays').textContent = userData.completedDays.length;
            document.getElementById('remainingDays').textContent = 40 - userData.currentDay + 1;
            
            // Прогресс бар
            const progress = (userData.completedDays.length / 40) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Карточка дня
            document.getElementById('dayNumber').textContent = `ДЕНЬ ${currentDayData.day}`;
            document.getElementById('dayTitle').textContent = currentDayData.title;
            document.getElementById('stageIndicator').textContent = `Этап ${currentDayData.stageNumber}: ${currentDayData.stageName}`;
            document.getElementById('taskContent').textContent = currentDayData.task;
            document.getElementById('observationContent').textContent = currentDayData.observation;
            document.getElementById('questionContent').textContent = currentDayData.question;
        }

        // Отметить день как выполненный
        function completeDay() {
            if (!userData.completedDays.includes(userData.currentDay)) {
                userData.completedDays.push(userData.currentDay);
            }
            
            if (userData.currentDay < 40) {
                userData.currentDay++;
                saveUserData();
                updateUI();
                tg.showAlert('День завершён. Продолжай путь.');
            } else {
                saveUserData();
                tg.showAlert('Путь пройден. Ты сделал это.');
            }
        }

        // Показать все дни (пока заглушка)
        function showAllDays() {
            tg.showAlert('Список всех дней будет доступен в следующей версии');
        }

        // Инициализация при загрузке
        window.onload = function() {
            if (loadUserData() && userData.startDate) {
                showProgressScreen();
            }
        };
    </script>
</body>
</html>
